if (self.CavalryLogger) { CavalryLogger.start_js(["8nhRm"]); }

__d("ComposedEntityMutabilityToName",[],(function(a,b,c,d,e,f){e.exports={0:"MUTABLE",1:"IMMUTABLE",2:"SEGMENTED"}}),null);
__d("ComposedEntityTypeToName",[],(function(a,b,c,d,e,f){e.exports={0:"MENTION",1:"LINK",2:"IMAGE",3:"VIDEO",4:"EMOTICON",5:"TOKEN",6:"HASHTAG",7:"IMPLICIT_LINK",8:"EMBED",9:"EMOJI",10:"MATH",11:"HIGHLIGHT",12:"DELIGHT",13:"TEMPLATE_VARIABLE",14:"ASSISTANT_TYPEAHEAD"}}),null);
__d("TextWithEntitiesTruncated.react",["fbt","Link.react","React","TextWithEntities.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();c=b("React").PropTypes;var h=b("React").useState,i=.6;function j(a,b,c){return a.map(function(a){return babelHelpers["extends"]({},a,{offset:a.offset-b})}).filter(function(a){return a.offset>=0&&a.offset<c})}function k(a,b,c){var d=null,e=a.split("\n");a.length>b&&(d=Math.floor(b*i));if(e.length>c){a=e.slice(0,c).join("\n").length;d!==null?d=Math.min(a,d):d=a}return d}function l(a){var b=[];a.forEach(function(a){a!=null&&a.offset!=null&&a.length!=null&&a.entity!=null&&b.push({entity:babelHelpers["extends"]({},a.entity),length:a.length,offset:a.offset})});return b}function a(a){__p&&__p();var c=a.text,d=a.ranges;d=d===void 0?[]:d;var e=a.truncationStyle;e=e===void 0?"none":e;var f=a.maxLength;f=f===void 0?800:f;var i=a.maxLines;i=i===void 0?8:i;a=babelHelpers.objectWithoutPropertiesLoose(a,["text","ranges","truncationStyle","maxLength","maxLines"]);var m=h(!1),n=m[0],o=m[1];if(c==null)return null;m=c;d=l(d);var p=null,q=function(){o(!0)},r=function(){o(!1)};if(e!=="none"&&!n){f=k(c,f,i);if(f!=null){m=c.substring(0,f);d=j(d,0,m.length);switch(e){case"ellipsis-only":p=b("React").createElement(b("React").Fragment,{key:"see-more-less"},g._("\u2026"));break;case"see-more":case"see-more-and-less":p=b("React").createElement(b("React").Fragment,{key:"see-more-less"},g._("\u2026")," ",b("React").createElement(b("Link.react"),{onClick:q},g._("Vezi mai mult")))}}}else e==="see-more-and-less"&&n&&(p=b("React").createElement(b("React").Fragment,{key:"see-more-less"}," ",b("React").createElement(b("Link.react"),{onClick:r},g._("Vezi mai pu\u0163in"))));return b("React").createElement(b("React").Fragment,null,b("React").createElement(b("TextWithEntities.react"),babelHelpers["extends"]({},a,{ranges:d,text:m})),p)}a.propTypes={text:c.string,ranges:c.arrayOf(c.shape({offset:c.number,length:c.number,entity:c.object})).isRequired,truncationStyle:c.oneOf(["none","ellipsis-only","see-more","see-more-and-less"]),maxLength:c.number,maxLines:c.number};e.exports=a}),null);
__d("ComposedEntityMutability",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MUTABLE:0,IMMUTABLE:1,SEGMENTED:2})}),null);
__d("MessengerEditorStateManager",["CacheStorage","ComposedEntityMutability","ComposedEntityMutabilityToName","ComposedEntityTypeToName","CurrentUser","DraftEntityInstance","EditorState","FBLogger","LogHistory","MessengerConstants","SelectionState","decodeBlocks","encodeBlocks","mapObject"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ComposedEntityMutability").IMMUTABLE,h=b("LogHistory").getInstance("messenger_editor_state_manager"),i=new(b("CacheStorage"))("localstorage","msgdraft:"),j=new(b("CacheStorage"))("memory"),k=!1,l;a={get:function(a){__p&&__p();if(!a)return this._getEmptyEditorState();if(a===b("MessengerConstants").NEW_THREAD_KEY)return l||this._getEmptyEditorState();var c=i.get(this._getKey(a),!1);k&&(c?(j.set(a,c),i.remove(this._getKey(a))):c=j.get(a,!1));if(!c)return this._getEmptyEditorState();a=c.encodedBlocks;var d=b("mapObject")(a.entityMap,function(a,c){return new(b("DraftEntityInstance"))({type:b("ComposedEntityTypeToName")[a.type],mutability:b("ComposedEntityMutabilityToName")[g],data:a.data})});a=b("decodeBlocks")(a.blocks,d);d=b("EditorState").createWithContent(a);return b("EditorState").acceptSelection(d,new(b("SelectionState"))(c.selection))},set:function(a,c){if(a===b("MessengerConstants").NEW_THREAD_KEY){l=c;return}var d=b("encodeBlocks")(c.getCurrentContent());c=c.getSelection();var e=c.toJS(),f=k?j:i;f=f.set(this._getKey(a),{encodedBlocks:d,selection:e});f||(this._logWriteError(a),this._switchToMemoryStore(a,d,c))},_getKey:function(a){return b("CurrentUser").getID()+":"+a},_logWriteError:function(a){var c=i.getLastSetExceptionMessage(),d=i.getStorageKeyCount();b("FBLogger")("messenger_dot_com").warn("Fail to write to MessengerEditorState %s  %s",c,d);h.debug("set_editor_state_fail",JSON.stringify({threadID:a,error:c,keysCount:d}))},_switchToMemoryStore:function(a,c,d){if(!k){b("FBLogger")("messenger_dot_com").warn("Switching to MemoryStorage");h.debug("Switching to memoryStorage");k=!0;d=d.toJS();j.set(a,{encodedBlocks:c,selection:d})}},_getEmptyEditorState:function(){var a=b("EditorState").createEmpty();return b("EditorState").forceSelection(a,a.getSelection())}};e.exports=a}),null);
__d("MessengerComposerActions",["MessengerDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({ADD_TOKEN:null,REMOVE_TOKEN:null,FOCUS_COMPOSER:null,FOCUS_TYPEAHEAD:null,EXIT_COMPOSE_STATE:null,MOVE_DRAFT:null});a={Types:g,addToken:function(a){b("MessengerDispatcher").dispatch({type:g.ADD_TOKEN,entry:a})},moveDraftToNextThread:function(a){b("MessengerDispatcher").dispatch({type:g.MOVE_DRAFT,threadID:a})},removeToken:function(a){b("MessengerDispatcher").dispatch({type:g.REMOVE_TOKEN,entry:a})},focusComposer:function(){b("MessengerDispatcher").dispatch({type:g.FOCUS_COMPOSER})},focusTypeahead:function(){b("MessengerDispatcher").dispatch({type:g.FOCUS_TYPEAHEAD})},exitComposeState:function(){b("MessengerDispatcher").dispatch({type:g.EXIT_COMPOSE_STATE})},exitComposeStateAbandonSearch:function(){b("MessengerDispatcher").dispatch({type:g.EXIT_COMPOSE_STATE,abandon_search:!0})}};e.exports=a}),null);
__d("MessengerMenu.react",["cx","Keys","MenuSeparator.react","MessengerDotComAndInboxM4Check.bs","ReactXUIMenu","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){a.isReactLegacyFactory={},a.type=a}c=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d=c.className;c=babelHelpers.objectWithoutPropertiesLoose(c,["className"]);return a.call(this,babelHelpers["extends"]({className:b("joinClasses")(d,"_2i-c"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6_n0":"")+" _150g")},c))||this}var d=c.prototype;d.handleKeydown=function(c,d){return c===b("Keys").DOWN||c===b("Keys").UP||c===b("Keys").SPACE?a.prototype.handleKeydown.call(this,c,d):!0};return c}(b("ReactXUIMenu"));a(c);c.Item=b("ReactXUIMenu").Item;c.Separator=b("MenuSeparator.react");e.exports=c}),null);
__d("XSettingsEmployeeBetaController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/settings/employee/beta_mode/",{enabled:{type:"Bool",defaultValue:!1}})}),null);
__d("MessengerBugNub.react",["cx","fbt","ix","AsyncRequest","CurrentUser","Image.react","Link.react","MessengerEnvironment","MessengerMenu.react","MessengerPopoverMenu.react","React","Tooltip","URI","WorkModeConfig","XSettingsEmployeeBetaController","gkx","goURI"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=i("86836"),k=i("86835"),l=i("86837");a=b("React").PropTypes;var m=b("MessengerMenu.react").Item,n=b("MessengerMenu.react").Separator,o=h._("Raporteaz\u0103 un bug");c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("CurrentUser").isEmployee()?b("React").createElement("div",{className:"_4_xe"+(b("gkx")("678606")?" _2jqn":"")},this.$1(),b("React").createElement(b("Link.react"),babelHelpers["extends"]({"aria-label":o,href:"#",ajaxify:"/ajax/bugs/employee_report",className:"_1fr8",rel:"dialog"},b("Tooltip").propsFor(o)),b("React").createElement("div",{className:"_1gng"},b("React").createElement(b("Image.react"),{src:j})))):null};d.$1=function(){var a=this.props.isBetaEnabled?k:l,c=h._("Preferin\u0163e interne");return b("React").createElement(b("MessengerPopoverMenu.react"),babelHelpers["extends"]({className:"_1fr8",menu:this.$2()},b("Tooltip").propsFor(c)),b("React").createElement(b("Link.react"),{"aria-haspopup":"true","aria-label":c,className:"_1gng",href:"#",role:"button"},b("React").createElement(b("Image.react"),{src:a})))};d.$2=function(){__p&&__p();var a=this,c=null;if(this.props.unixName){var d=this.props.unixName+".sb";c=b("React").createElement(m,{label:"Sandbox",onclick:function(){return a.$3(d)}})}return b("React").createElement(b("MessengerMenu.react"),null,b("React").createElement(m,{label:"Public",onclick:function(){return a.$4(!1)}}),b("React").createElement(m,{label:"Beta",onclick:function(){return a.$4(!0)}}),b("React").createElement(n,null),b("React").createElement(m,{label:"C1 (trunkstable)",onclick:function(){return a.$3()}}),b("React").createElement(m,{label:"Intern",onclick:function(){return a.$3("intern")}}),b("React").createElement(m,{label:"Production",onclick:function(){return a.$3("prod")}}),c)};d.$4=function(a){var c=b("XSettingsEmployeeBetaController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({enabled:a}).setMethod("POST").setAllowCrossPageTransition(!0).send()};d.$3=function(a){var c=b("MessengerEnvironment").facebookdotcom?".facebook.com":".messenger.com",d=b("WorkModeConfig").company_subdomain;d=d?d:"www";d=d+(a?"."+a:"")+c;b("goURI")(b("URI").getRequestURI().getQualifiedURI().setDomain(d))};return c}(b("React").PureComponent);c.propTypes={isBetaEnabled:a.bool,unixName:a.string};e.exports=c}),null);
__d("MessengerReasonDialogContainerReact.bs",["bs_list","bs_array","bs_block","bs_curry","React","ReasonReact.bs","MessengerDialogs.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").reducerComponent("MessengerReasonDialogContainer");function h(){__p&&__p();return[g[0],g[1],g[2],g[3],function(a){return b("MessengerDialogs.bs").addHandler(function(c){return b("bs_curry")._1(a[3],[c])})},g[5],g[6],g[7],function(a){a=a[1];if(a!==void 0)return b("React").createElement("div",void 0,b("bs_array").mapi(function(a,c){return b("React").createElement("span",{key:String(a)},b("bs_curry")._1(c,0))},b("bs_array").of_list(b("bs_list").rev(a))));else return null},function(){return void 0},g[10],function(a,c){return b("bs_block").__(0,[a[0]])},g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(){return h([])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("MessengerComposerState",["immutable"],(function(a,b,c,d,e,f){"use strict";a=b("immutable").Record({step:null,recipients:b("immutable").List()});a.__TCmeta={type:"MessengerComposerState"};e.exports=a}),null);
__d("MessengerComposerSteps",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({NULL:null,SELECT_RECIPIENTS:null,COMPOSE:null});e.exports=a}),null);
__d("MessengerComposerStore",["EditorState","MessengerActions","MessengerBootloadedSecondarySearchLogger","MessengerComposerActions","MessengerComposerState","MessengerComposerSteps","MessengerConstants","MessengerDispatcher","MessengerEditorStateManager","MessengerSecondarySearchFunnelConstants","MessengerStore","MessengerURIStore","MessengerView","immutable","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("MessengerComposerState"))({step:b("MessengerComposerSteps").NULL,recipients:b("immutable").List()});a=b("MessengerSecondarySearchFunnelConstants").EVENTS;var h=a.CLICK_OTHER_THREAD,i=a.END,j=a.START,k=a.RESULT_SELECTED,l=a.TOKEN_REMOVED;c=b("MessengerSecondarySearchFunnelConstants").END_ACTIONS;var m=c.ABANDON,n=c.ENTER_THREAD,o=b("MessengerSecondarySearchFunnelConstants").CLIENTS.MESSENGER_DOT_COM,p=b("MessengerSecondarySearchFunnelConstants").SELECTION_TYPES.ADD,q=b("MessengerSecondarySearchFunnelConstants").ENTRY_SURFACES.COMPOSER,r=b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER;d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.$MessengerComposerStore1=g;return b}var d=c.prototype;d.getState=function(){return this.$MessengerComposerStore1};d.__onDispatch=function(a){__p&&__p();b("MessengerDispatcher").waitFor([b("MessengerURIStore").getDispatchToken()]);var c=b("MessengerURIStore").getState().detailView,d=this.$MessengerComposerStore1.recipients,e=this.$MessengerComposerStore1.step,f=null,g=null;switch(a.type){case b("MessengerComposerActions").Types.ADD_TOKEN:if(d.some(function(b){return b.getUniqueID()===a.entry.getUniqueID()}))break;b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:k,id:a.entry.getUniqueID(),query:null,surface:q,loggingID:r,selectionType:p});f=d.push(a.entry);break;case b("MessengerComposerActions").Types.REMOVE_TOKEN:var s=a.entry.getUniqueID(),t=d.findIndex(function(a){return a.getUniqueID()===s});t!==-1&&(f=d["delete"](t),b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:l,clearedAll:!1,deletedIDs:[a.entry.getUniqueID()],loggingID:r}));break;case b("MessengerComposerActions").Types.FOCUS_COMPOSER:e===b("MessengerComposerSteps").SELECT_RECIPIENTS&&(g=b("MessengerComposerSteps").COMPOSE);break;case b("MessengerComposerActions").Types.FOCUS_TYPEAHEAD:e===b("MessengerComposerSteps").COMPOSE&&(g=b("MessengerComposerSteps").SELECT_RECIPIENTS);break;case b("MessengerActions").Types.REPLACE_STATE:t=b("MessengerURIStore").getPrevState().detailView;t!==b("MessengerView").DETAIL.COMPOSE&&c===b("MessengerView").DETAIL.COMPOSE?(g=b("MessengerComposerSteps").SELECT_RECIPIENTS,b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:j,client:o,surface:q,loggingID:r})):t===b("MessengerView").DETAIL.COMPOSE&&c!==b("MessengerView").DETAIL.COMPOSE&&b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:h,loggingID:r});break;case b("MessengerComposerActions").Types.MOVE_DRAFT:t=a.threadID.split(":");c=t.length>1?t[1]:"";b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:i,surface:q,loggingID:r,end_reason:n,threadID:c,isNewThread:!1});b("MessengerEditorStateManager").set(a.threadID,b("MessengerEditorStateManager").get(b("MessengerConstants").NEW_THREAD_KEY));break;case b("MessengerComposerActions").Types.EXIT_COMPOSE_STATE:var u=b("EditorState").createEmpty();b("setTimeout")(function(){b("MessengerEditorStateManager").set(b("MessengerConstants").NEW_THREAD_KEY,b("EditorState").forceSelection(u,u.getSelection()))},0);a.abandon_search?b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:i,surface:q,loggingID:r,end_reason:m}):b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:i,surface:q,loggingID:r,end_reason:n,threadID:a.threadID,isNewThread:!1});g=b("MessengerComposerSteps").NULL;f=b("immutable").List();break}(f||g)&&(this.$MessengerComposerStore1=new(b("MessengerComposerState"))({step:g||e,recipients:f||d}),this.emitChange())};return c}(b("MessengerStore"));e.exports=new d()}),null);
__d("AtSignAllowEmptyMentionsStrategy",["DocumentMentionsRegex"],(function(a,b,c,d,e,f){__p&&__p();a=b("DocumentMentionsRegex").PUNCTUATION;c=["@","\\uff20"].join("");d="[^"+c+a+"\\s]";f="(?:\\.[ |$]| |["+a+"]|)";var g=new RegExp("(?:^|\\s|[(\\/])(["+c+"]((?:"+d+f+"){0,20}))$");b={name:"AtSignAllowEmptyMentionsStrategy",findMentionableString:function(a){a=g.exec(a);if(a!==null){var b=a[2];return{matchingString:b,leadOffset:a[1].length}}return null}};e.exports=b}),null);
__d("WorkplaceDotComMigrationUtils",["invariant","URI","isFacebookURI","isWorkplaceDotComURI"],(function(a,b,c,d,e,f,g){__p&&__p();var h="facebook.com",i="workplace.com";a={getFacebookURIFromWorkplaceURI:function(a){if(b("isFacebookURI")(a)&&!b("isWorkplaceDotComURI")(a))return a;var c=a.getDomain();c||g(0,11673);b("isWorkplaceDotComURI")(a)||g(0,13496);c=c.replace(new RegExp("workplace\\.com$"),h);c=c.replace(new RegExp("^my\\."),"workplace.");return new(b("URI"))(a).setDomain(c)},getWorkplaceURIFromFacebookURI:function(a){if(b("isWorkplaceDotComURI")(a))return a;b("isFacebookURI")(a)||g(0,13497);var c=a.getDomain();c||g(0,11673);c=c.replace(new RegExp("facebook\\.com$"),i);c=c.replace(new RegExp("^workplace\\."),"my.");return new(b("URI"))(a).setDomain(c)},chooseWorkplaceOrFacebookDomain:function(a){var c=b("URI").getRequestURI();return b("isWorkplaceDotComURI")(c)?this.getWorkplaceURIFromFacebookURI(a):this.getFacebookURIFromWorkplaceURI(a)}};e.exports=a}),null);
__d("XMessengerDotComNUXLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/logging/promotion/",{promotion_id:{type:"Int",required:!0},instance_log_data:{type:"StringToStringMap",defaultValue:{}}})}),null);
__d("XSettingsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/settings/",{tab:{type:"String"},section:{type:"String"},edit_section:{type:"String"},id:{type:"String"},managed_notif_id:{type:"Int"},qp_id:{type:"Int"},ref:{type:"String"},privacy_source:{type:"Enum",enumType:1},option:{type:"String"},show_modal:{type:"Bool",defaultValue:!1},flow_kind:{type:"String"},referrer:{type:"Enum",enumType:1},protocol:{type:"String"},country:{type:"String"},initial_open_app_id:{type:"FBID"}})}),null);